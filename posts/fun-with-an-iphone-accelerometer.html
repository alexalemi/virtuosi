<!doctype html>
<html lang="">	
<head>
	<meta charset="utf-8"/>
	<title>Fun with an iPhone&nbsp;Accelerometer - The Physics Virtuosi</title>	
	<meta name="author" content="The Virtuosi">
	
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0">
	
	<link href='http://fonts.googleapis.com/css?family=Droid+Sans:700,400|Droid+Sans+Mono' rel='stylesheet' type='text/css'>
    <!-- <link href='http://fonts.googleapis.com/css?family=Libre+Baskerville:400,400italic,700|Droid+Serif:400,400italic,700' rel='stylesheet' type='text/css'> -->
	<link rel="stylesheet" href="http://thephysicsvirtuosi.com/theme/css/main.css" type="text/css" />
	<link rel="stylesheet" href="http://thephysicsvirtuosi.com/theme/css/custom.css" type="text/css" />
		
	<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	
			
	<link href="http://thephysicsvirtuosi.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="The Physics Virtuosi ATOM Feed" />
		<link href="http://thephysicsvirtuosi.com/feeds/all.rss.xml" type="application/atom+xml" rel="alternate" title="The Physics Virtuosi RSS Feed" />
	
  <!-- Using MathJax, with the delimiters $ -->
<!-- Conflict with pygments for the .mo and .mi -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        "HTML-CSS": {
            styles: {
                ".MathJax .mo, .MathJax .mi": {color: "black ! important"}}
        },
        tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']],
          processEscapes: true}
    });
</script>
<script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type= "text/javascript"> -->
<!--     MathJax.Hub.Config({ -->
<!--         config: ["MMLorHTML.js"], -->
<!--         jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML"], -->
<!--         TeX: { extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"], equationNumbers: { autoNumber: "AMS" } }, -->
<!--         extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js"], -->
<!--         tex2jax: { --> 
<!--             inlineMath: [ [\'$\',\'$\'] ], -->
<!--             displayMath: [ [\'$$\',\'$$\'] ], -->
<!--             processEscapes: true }, -->
<!--         "HTML-CSS": { -->
<!--             styles: { ".MathJax .mo, .MathJax .mi": {color: "black ! important"}} -->
<!--         } -->
<!--     }); -->
<!-- </script> -->
</head>
	
<body>		
	<header class="clearfix" role="banner">
		<div class="wrapper">
			<h1 class="huge"><a href="http://thephysicsvirtuosi.com">The Physics Virtuosi</a></h1>
		</div>
        <div class="search">
            <script>
  (function() {
    var cx = '016118979984514975664:u9tdrwxiom8';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:searchbox></gcse:searchbox>        </div>
	</header>

    <div class="results content">
        <gcse:searchresults></gcse:searchresults>    </div>
	<div role="main" class="content clearfix">	
	<article>
		<div class="post wrapper">
			<h1>Fun with an iPhone&nbsp;Accelerometer</h1>
			<p><a href="http://2.bp.blogspot.com/-f7mSv8QGLGs/Tj9_a2qp1SI/AAAAAAAAAEY/Ax5EEw8Cjmg/s1600/accelerometer.jpg"><img alt="image" src="http://2.bp.blogspot.com/-f7mSv8QGLGs/Tj9_a2qp1SI/AAAAAAAAAEY/Ax5EEw8Cjmg/s320/accelerometer.jpg" /></a>
The iPhone <span class="caps">3GS</span> has a built-in <a href="http://pdf1.alldatasheet.com/datasheet-pdf/view/236640/STMICROELECTRONICS/LIS302DL.html">accelerometer, the
<span class="caps">LIS302DL</span></a>,
which is primarily used for detecting device orientation. I wanted to
come up with something interesting to do with it, but first I had to see
how it did on some basic tests. It turns out that the tests gave really
interesting results themselves! A drop test gave clean results and a
spring test gave fantastic data; however a pendulum test gave some
problems. You might guess the accelerometer would give a reading of 0 in
all axes when the device is sitting on a desk. However, this
accelerometer measures &#8220;proper acceleration,&#8221; which essentially is a
measure of acceleration relative to free-fall. So the device will read
-1 in the z direction (in units where 1 corresponds to 9.8 m/s^2, the
acceleration due to gravity at the surface of Earth). Armed with this
knowledge, let&#8217;s take a look at the drop test: To perform this test, I
stood on the couch which was in my office (before it was taken away from
us!), and dropped my phone hopefully into the hands of my officemate. I
suspected that the device would read magnitude 1 before dropping, 0
during the drop, and a large spike for the large deceleration when the
phone was caught.
<a href="http://2.bp.blogspot.com/-g8pt_dT0gR8/Tj9D2GTkc6I/AAAAAAAAADw/1iwHCsPixtY/s1600/DropTest.png"><img alt="image" src="http://2.bp.blogspot.com/-g8pt_dT0gR8/Tj9D2GTkc6I/AAAAAAAAADw/1iwHCsPixtY/s400/DropTest.png" /></a>
As you can see, the results were basically as expected. The purple line
shows the magnitude of the acceleration relative to free-fall. Before
the drop, the magnitude bounces around 1, which is due to my inability
to hold something steadily. The drop occurred near time 12.6, but I
wasn&#8217;t able to move my hand arbitrarily quickly so there&#8217;s not a sharp
drop to 0 magnitude. The phone fell for around 0.4 seconds corresponding
to <mathjax>$$y = \frac{1}{2} g t^2 = \frac{1}{2} (9.8 \frac{m}{s^2})*(0.4
s)^2 = 0.784 m = 2.57 feet $$</mathjax> As for the spike at 13 seconds, the raw
data shows that the catch occurs in <mathjax>$$ t = 0.02 \pm 0.01 s $$</mathjax>. In order
for the device to come to rest in such a short amount of time, there
needs to be a large deceleration provided by my officemate&#8217;s hands. Now
the pendulum test consisted of taping my phone to the bottom of a 20
foot pendulum.
<a href="http://2.bp.blogspot.com/-7uO_824O6t4/Tj9Q1crvlUI/AAAAAAAAAD4/uO3YsrXStak/s1600/pendulum.png"><img alt="image" src="http://2.bp.blogspot.com/-7uO_824O6t4/Tj9Q1crvlUI/AAAAAAAAAD4/uO3YsrXStak/s400/pendulum.png" /></a>
I didn&#8217;t think enough about this, but the period of a pendulum, assuming
we have a small amplitude, is given by: <mathjax>$$T = 2 \pi
\sqrt{\frac{L}{g}}$$</mathjax> which is about 5 seconds. With a relatively small
amplitude, the acceleration in the x direction will be small. Basically
I&#8217;m reaching the limit of the resolution of the acceleration device. It
appears that the smallest increment the device can measure is 0.0178 g.
This happens to match the specifications from the spec sheet I linked at
the top of the page, where they specify a minimum of 0.0162 g, and a
typical sensitivity of 0.018 g! Now we come to the most exciting test,
the spring test! Setup: I taped my phone to the end of a spring and let
it go. Ok. Here is the actual acceleration data:
<a href="http://3.bp.blogspot.com/-3qbU9p2I3sE/Tj9a7-eOk-I/AAAAAAAAAEA/0ByUQ039dio/s1600/springdata.png"><img alt="image" src="http://3.bp.blogspot.com/-3qbU9p2I3sE/Tj9a7-eOk-I/AAAAAAAAAEA/0ByUQ039dio/s400/springdata.png" /></a>
The first thing I see is that the oscillation frequency looks constant,
as it should be for a simple harmonic oscillator. There is also a decay
which looks exponential! Let&#8217;s see how well the data fits if we have a
frictional term proportional to the velocity of the phone. This gives is
a differential equation which looks like this: <mathjax>$$ m \ddot{x} +
F\dot{x} + k x = 0 $$</mathjax> Now we can plug in an ansatz (educated guess) to
solve this equation: <mathjax>$$ x(t) = A*e^{i b t} $$</mathjax> <mathjax>$$-b^2 mx(t) + i b
Fx(t) + kx(t) = 0$$</mathjax> <mathjax>$$-m b^2+iFb+k = 0$$</mathjax> We can solve this equation for
b with the quadratic equation: <mathjax>$$ b = \frac{\sqrt{4km - F^2}}{2m} +
i\frac{F}{2m} \equiv \omega + i \gamma $$</mathjax> where I defined two new
constants here. So we see that our ansatz does solve the differential
equation. Now we want acceleration, which is the second time derivative
of position with respect to time. <mathjax>$$a(t) \equiv \ddot{x} = -b^2 A
e^{ibt} $$</mathjax> Now are only interested in the real part of this solution,
which gives us (adding in a couple of constants to make the solution
more general): <mathjax>$$a(t) = -(\omega^2 - \gamma^2) A e^{-\gamma t}
cos(\omega t + \phi) + C $$</mathjax> Let&#8217;s redefine the coefficient of this
acceleration to make things a little cleaner! <mathjax>$$a(t) = B e^{-\gamma t}
cos(\omega t + \phi) + C $$</mathjax> Ok, with that math out of the way (for
now), we can try to fit this data. I actually used Excel to fit this
data using a not-so-well-known tool called Solver. This allows you to
maximize or minimize one cell while Excel varies other cells. In this
case, I defined a cell which is the <a href="http://en.wikipedia.org/wiki/Residual_sum_of_squares">Residual Sum of
Squares</a> of my fit
versus the actual data, and I tell Excel to vary the 5 constants which
make the fit! The values jump around for a little while then it gives up
when it thinks it converged to a solution. Using this you can fit
arbitrary functions, neato! With this, I come up with the following
plot:
<a href="http://1.bp.blogspot.com/-23lXSPVOwuY/Tj9a8Curm3I/AAAAAAAAAEI/F5Fb9dxdvDs/s1600/springlineardamp.png"><img alt="image" src="http://1.bp.blogspot.com/-23lXSPVOwuY/Tj9a8Curm3I/AAAAAAAAAEI/F5Fb9dxdvDs/s400/springlineardamp.png" /></a>
<mathjax>$$B = 0.633740943$$</mathjax> <mathjax>$$\gamma = 0.012097581 $$</mathjax> <mathjax>$$\omega = 8.599670376
$$</mathjax> <mathjax>$$\phi = 0.693075811 $$</mathjax> <mathjax>$$C =-1.004454967 $$</mathjax> with an R^2 value of
0.968! At this point it should be noted that if I discretize my smooth
fit to have the same resolution (0.0178 g) as the accelerometer, then
see what the error is comparing the smooth fit to its own
discretization, I get an R^2 of 0.967! This means that there is a
decent amount of built-in error to these fits due to discretization on
the order of the error we&#8217;re seeing for our actual fits. Immediately we
can recognize that C should be -1, since this is just a factor relating
&#8220;free-fall&#8221; acceleration to actual iPhone acceleration. If we wanted, we
could solve for the ratio of the spring constant to the mass, but I&#8217;ll
leave that as <a href="http://www.amazon.com/Classical-Electrodynamics-Third-David-Jackson/dp/047130932X">an exercise for the
reader.</a>
If you look closely, you can see that the frequency appears to match
very well. The two lines don&#8217;t go out of phase. One problem with the fit
is the decay. The beginning and the end of the data are too high
compared to the fit, which is a problem. This implies that there is some
other kind of friction at work. Some larger objects or faster moving
objects tend to experience a frictional force proportional to the square
of the velocity. I don&#8217;t think my iPhone is large or fast (compared to a
plane for example), but I&#8217;ll try it anyway. The differential equation
is: <mathjax>$$ m \ddot{x} + F\dot{x}^2 + k x = 0 $$</mathjax> yikes. This is a tough
one because of the velocity squared term. <a href="http://www.jstor.org/pss/3620747">One trick I found
here</a> attempts a general solution for
a similar equation. They make an approximation in order to solve it, but
the approximation is pretty good in our case. Take a look at the paper
if you&#8217;re interested. The basic idea is to note that the friction term
is the only one that affects the energy. So, assuming that the energy
losses are small in a cycle, we can look at a small change in energy
with respect to a small change in time due to this force term. This
gives us an equation which can let us solve for the amplitude as a
function of time approximately! Really interesting idea. So I plugged
the following equation into the Excel Solver: <mathjax>$$a(t) = \frac{A
cos(\omega t + \phi)}{\gamma t + 1} + B$$</mathjax> Here&#8217;s the fit:
<a href="http://2.bp.blogspot.com/-fCXr2CkPGE4/Tj9a8pH2KFI/AAAAAAAAAEQ/XaulleF3xK4/s1600/springsqdamp.png"><img alt="image" src="http://2.bp.blogspot.com/-fCXr2CkPGE4/Tj9a8pH2KFI/AAAAAAAAAEQ/XaulleF3xK4/s400/springsqdamp.png" /></a>
Which uses these values: <mathjax>$$A = 0.772773705 $$</mathjax> <mathjax>$$\gamma = 0.029745368 $$</mathjax>
<mathjax>$$\omega = 8.600177692 $$</mathjax> <mathjax>$$\phi = 0.688610161 $$</mathjax> <mathjax>$$B = -1.004530009
$$</mathjax> with an R^2 value of 0.964! This fit seems to have the opposite
effect. The middle of the data is too high compared to the fit, while
the beginning and end of the data seems too low. This makes me think
that the actual friction terms involved in this problem are possibly a
sum of a linear term and a squared term. I don&#8217;t know how to make
progress on that differential equation, so I wasn&#8217;t able to fit
anything. If you try the same trick I mentioned earlier, you run into a
problem where you can&#8217;t separate some variables which you need to
separate in the derivation unfortunately. So there you have it, I wanted
to find something neat to do, and I got really cool data from just
testing the accelerometer. Stay tuned for an interesting challenge
involving some physical data from my&nbsp;accelerometer!</p>
			
			<a href="https://twitter.com/share" class="twitter-share-button" data-via="thevirtuosi" data-lang="en" data-size="large" data-related="thevirtuosi">Tweet</a>
			<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
						
						<div class="comments">
			<h2>Comments !</h2>
			    <div id="disqus_thread"></div>
			    <script type="text/javascript">
			       var disqus_identifier = "posts/fun-with-an-iphone-accelerometer.html";
			       (function() {
			       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			       dsq.src = 'http://thephysicsvirtuosi.disqus.com/embed.js';
			       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			      })();
			    </script>
			</div>
						
		</div>
	
	<div class="meta wrapper">
	<time datetime="2011-08-03T03:24:00" pubdate>Wed 03 August 2011</time>
	<ul class="tag clearfix">
		<li><a href="http://thephysicsvirtuosi.com/category/old.html">old</a></li>
			<li><a href="http://thephysicsvirtuosi.com/tag/free-fall.html">free fall</a></li>
			<li><a href="http://thephysicsvirtuosi.com/tag/bohn.html">Bohn</a></li>
			<li><a href="http://thephysicsvirtuosi.com/tag/sho.html">SHO</a></li>
			<li><a href="http://thephysicsvirtuosi.com/tag/accelerometer.html">accelerometer</a></li>
			<li><a href="http://thephysicsvirtuosi.com/tag/iphone.html">iphone</a></li>
			<li><a href="http://thephysicsvirtuosi.com/tag/pendulum.html">pendulum</a></li>
		</ul>
	</div>	</article>	
</div>
	
		
<footer class="clearfix">
	<div class="wrapper pages">
		<ul class="nav">
					<li><a href="http://thephysicsvirtuosi.com/pages/about-us.html">About&nbsp;Us</a></li>
					<li><a href="http://thephysicsvirtuosi.com/pages/contributors.html">Contributors</a></li>
					<li><a href="http://thephysicsvirtuosi.com/archives.html">Archive</a></li>
		</ul>
	</div>
	
	<div class="copy wrapper">
		<ul class="social">
						<li><a href="https://twitter.com/thevirtuosi">twitter</a></li>
						<li><a href="https://www.facebook.com/thevirtuosi">facebook</a></li>
						<li><a href="http://github.com/alexalemi/virtuosi/">github</a></li>
						<li><a href="feeds/all.rss.xml">rss</a></li>
						<li><a href="feeds/all.atom.xml">atom</a></li>
					</ul>
	
		<p role="contentinfo">Â© 2012 The Virtuosi<br>
		Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">Pelican</a>.</p>
	</div>
</footer>
	
	<script>
	  var _gaq=[['_setAccount','UA-15719155-6'],['_trackPageview']];
	  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
	  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
	  s.parentNode.insertBefore(g,s)}(document,'script'));
	</script>
</body>
</html>