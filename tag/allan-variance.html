<!DOCTYPE html>
<html lang="en">
<head>
        <title>The Physics Virtuosi - allan variance</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../theme/css/main.css" type="text/css" />
                <link href="http://thephysicsvirtuosi.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="The Physics Virtuosi Atom Feed" />
                
        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie.css"/>
                <script src="../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie6.css"/><![endif]-->

    <!-- Using MathJax, with the delimiters $ -->
    <!-- Conflict with pygments for the .mo and .mi -->
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            "HTML-CSS": {
                styles: {
                    ".MathJax .mo, .MathJax .mi": {color: "black ! important"}}
            },
            tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']],processEscapes: true}
        });
    </script>
    <script type="text/javascript"
        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../">The Physics Virtuosi </a></h1>
                <nav><ul>
                                                                                                    <li ><a href="../category/old.html">old</a></li>
                                </ul></nav>
        </header><!-- /#banner -->
                

            

                            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="../posts/time-keeps-on-slippin-.html">Time Keeps On Slippin'</a></h1> 
                    <footer class="post-info">
        <abbr class="published" title="2012-02-12T22:00:00">
                Sun 12 February 2012
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="../author/corky.html">Corky</a>
        </address>
        <p>In <a href="../category/old.html">old</a>. </p>
<p>tags: <a href="../tag/allan-variance.html">allan variance</a><a href="../tag/scott-bakula.html">scott bakula</a><a href="../tag/casio.html">casio</a></p>
</footer><!-- /.post-info --><table cellpadding="0" cellspacing="0" class="tr-caption-container" style="float: left; margin-right: 1em; text-align: left;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-rtzREUF0wYM/TyX0orGHkpI/AAAAAAAAASk/hsRZAwtg7H4/s1600/casi_f91w.jpg" imageanchor="1" style="clear: left; margin-bottom: 1em; margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://3.bp.blogspot.com/-rtzREUF0wYM/TyX0orGHkpI/AAAAAAAAASk/hsRZAwtg7H4/s320/casi_f91w.jpg" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">This is picture of a watch.  (Source: Wikipedia)</td></tr></tbody></table>

<p>A couple of months ago, the Virtuosi Action Team (VAT) assembled for lunch and the discussion quickly and unexpectedly turned to watches.  As Nic and Alemi argued over the finer parts of fancy-dancy watch ownership, I looked down at my watch:  the lowly <a href="http://en.wikipedia.org/wiki/Casio_F91W">Casio F-91W</a>.  Though it certainly isn't fancy, it is inexpensive, durable, and could potentially win me an all-expense paid trip to the <a href="http://www.guardian.co.uk/world/2011/apr/25/guantanamo-files-casio-wristwatch-alqaida">Caribbean</a>. 
<div>
</div><div>But how <i>good</i> of a watch is it?  To find out, I decided to time it against the official U.S. time for a couple of months.  Incidentally, about half-way in I found out that Chad over at <a href="http://scienceblogs.com/principles/">Uncertain Principles</a> had done essentially the same thing <a href="http://scienceblogs.com/principles/2011/05/the_testing_of_time_measuring.php">already</a>.  No matter, science is still fun even if you aren't the first person to do it.  So here's my "new-to-me" analysis.</p>
<p><a name='more'></a>Alright, so how do we go about quantifying how "good" a watch is?  Well, there seem to be two main things we can test.  The first of these is accuracy.  That is, how close does this watch come to the <i>actual</i> time (according to some time system)?  If the official time is 3:00 pm and my watch claims it is 5:00 am, then it is not very accurate.  The second measure of "good-ness" is precision or, in watch parlance, stability.  This is essentially a measure of the consistency of the watch.  If I have a watch that is consistently off by 5 minutes from the official time, then it is not accurate but it is still stable.  In essence, a very consistent watch would be just as good as an accurate one, because we can always just subtract off the known offset.</p>
<p>To test any of the above measures of how "good" my cheap watch is, we will need to know the actual time.  We will adopt the official U.S. time as provided on the <a href="http://nist.time.gov/timezone.cgi?Eastern/d/-5/java">NIST website</a>.  This time is determined and maintained by a collection of really impressive atomic clocks.  <a href="http://en.wikipedia.org/wiki/NIST-F1">One of these</a> is in Colorado and the other is secretly guarded by an ever-vigilant Time Lord (see Figure 1). </p>
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-EXMf5o9a4GI/TzCRcaMjjVI/AAAAAAAAASs/FlqyjHbJS9Q/s1600/flavor_flav.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://4.bp.blogspot.com/-EXMf5o9a4GI/TzCRcaMjjVI/AAAAAAAAASs/FlqyjHbJS9Q/s320/flavor_flav.jpg" width="290" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Figure 1:  Flavor Flav, Keeper of the Time</td></tr></tbody></table>

<p>At 9:00:00 am EST on November 30th, I synchronized my watch with the time displayed on the NIST website.  For the next 54 days, I kept track of the difference between my watch an the NIST time.  On the 55th day, I forgot to check the time and the experiment promptly ended.  The results are plotted below in Figure 2 (and, as with all plots, click through for a larger version).
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-hscjUIehrHQ/TzCYqNhcsYI/AAAAAAAAATE/eAz3O5KlAcY/s1600/time_fit_short.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="300" src="http://3.bp.blogspot.com/-hscjUIehrHQ/TzCYqNhcsYI/AAAAAAAAATE/eAz3O5KlAcY/s400/time_fit_short.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Figure 2: Best-fit to time difference</td></tr></tbody></table><div class="separator" style="clear: both; text-align: center;"><span style="font-size: x-small;">
</span></div>As you can see from Figure 2, the amount of time the watch lost over the timing period appears to be fairly linear.  There does appear to be a jagged-ness to the data, though.  This is mainly caused by the fact that both the watch and the NIST website only report times to the nearest second.  As a result, the finest time resolution I was willing to report was about half a second.</p>
<p>Adopting an uncertainty of half a second, I did a least-squares fit of a straight line to the data and found that the watch loses about 0.35 seconds per day.</p>
<p>As far as accuracy goes, that's not bad!  No matter what, I'll have to set my watch at least twice a year to appease the Daylight Savings Gods.  The longest stretch between resetting is about 8 months.  If I synchronize my watch with the NIST time to "spring forward" in March, it will only lose about</p>
<p><mathjax>$$ t_{loss} = 8~\mbox{months} \times 30\frac{\mbox{days}}{\mbox{month}} \times 0.35 \frac{\mbox{sec}}{\mbox{day}} = 84~\mbox{sec} $$</mathjax></p>
<p>before I have to re-synchronize to "fall back" in November.  Assuming the loss rate is constant, I'll never be more than about a minute and a half off the "actual" time.  That's good enough for me.</p>
<p>Furthermore, if the watch is <i>consistently</i> losing 0.35 seconds per day and I know how long ago I last synchronized, I can always correct for the offset.  In this case, I can always know the official time to within a second (assuming I can add).</p>
<p>But <i>is</i> the watch consistent?  That's a good question.  The simplest means of finding the stability of the watch would be to look at the timing residuals between the data and the model.  That is, we will consider how "off" each point is from our constant rate-loss model.  A plot of the results is shown below in Figure 3.
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-13ULtvOlXuU/TzCpp6LGvfI/AAAAAAAAATM/8rybD1lxZOo/s1600/residuals.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="300" src="http://1.bp.blogspot.com/-13ULtvOlXuU/TzCpp6LGvfI/AAAAAAAAATM/8rybD1lxZOo/s400/residuals.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Figure 3: Timing residuals</td></tr></tbody></table>From Figure 3, we see that the data fit the model pretty well.  There's a little bit of a wiggle going on there and we see some strong short-term correlations (the latter is an artifact of the fact that I could only get times to the nearest second). </p>
<p>To get some sense of the timing stability from the residuals, we can calculate the standard deviation, which will give us a figure for how "off" the data typically are from the model.  The standard deviation of the residuals is</p>
<p><mathjax>$$ \sigma_{res} = 0.19~\mbox{sec}. $$</mathjax></p>
<p>A good guess at the fractional stability of the watch would then just be the standard deviation divided by the sampling interval,</p>
<p><mathjax>$$ \frac{\sigma_{res}}{T} = 0.19~\mbox{sec} \times \frac{1}{1~\mbox{day}} \times \frac{1~\mbox{day}}{24\times3600~\mbox{sec}} \approx 2\times10^{-6}.$$</mathjax></p>
<p>In words, this means that each "tick" of the watch is consistent with the average "tick" value to about 2 parts in a million. </p>
<p>That's nice...but isn't there something <i>fancier</i> we could be doing?  Well, I have been wanting to learn about <a href="http://en.wikipedia.org/wiki/Allan_variance">Allan variance</a> for some time now, so let's try that. </p>
<p>The Allan variance (refs: <a href="http://www.ino.it/~azavatta/References/Allan.pdf">original paper</a> and a <a href="http://tf.boulder.nist.gov/general/pdf/118.pdf">review</a>) can be used to find the fractional frequency stability of an oscillator over a wide range of time scales.  Roughly speaking, the Allan variance tells us how averaging our residuals over different chunks of time affects the stability of our data.  The square root of the Allan variance, essentially the "Allan standard deviation," is plotted against various averaging times for our data below in Figure 4.
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-_zhCroHDoNE/TzC7XYkDZ1I/AAAAAAAAATU/mCaspxYhlxA/s1600/allan_variance.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="300" src="http://2.bp.blogspot.com/-_zhCroHDoNE/TzC7XYkDZ1I/AAAAAAAAATU/mCaspxYhlxA/s400/allan_variance.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Figure 4:  Allan variance of our residuals</td></tr></tbody></table>From Figure 4, we see that as we increase the averaging time from one day to ten days, the Allan deviation decreases.  That is, the averaging reduces the amount of variation in the frequency of the data, making it more stable.  However, at around 10 days of averaging time it seems as though we hit a floor in how low we can go.  Since the error bars get really big here, this may not be a real effect.  If it is real, though, this would be indicative of some low-frequency noise in our oscillator.  For those who prefer colors, this would be "<a href="http://en.wikipedia.org/wiki/Colors_of_noise">red</a>" noise.</p>
<p>Since the Allan deviation gives the fractional frequency stability of the oscillator, we have that</p>
<p><mathjax>$$\sigma_A = \frac{\delta f}{f} = \frac{\delta(1/t)}{1/t} = \frac{\delta t}{t}. $$</mathjax></p>
<p>Looking at the plot, we see that with an averaging time of one day, the fractional time stability of the watch is</p>
<p><mathjax>$$\frac{\delta t}{t} \approx 2\times10^{-6}, $$</mathjax></p>
<p>which corresponds nicely to our previously calculated value.  If we average over chunks that are ten days long instead, we get a fractional stability of</p>
<p><mathjax>$$\frac{\delta t}{t} \approx 10^{-7}, $$</mathjax></p>
<p>which would correspond to a deviation from our model of about 0.008 seconds.  Not bad.</p>
<p>The initial question that started this whole ordeal was "How good is my watch?" and I think we can safely answer that with "as good as I'll ever need it to be."  Hooray for cheap and effective electronics!</p>
</div><p>There are <a href="../posts/time-keeps-on-slippin-.html#disqus_thread">comments</a>.</p>                </article>
                                    <p class="paginator">
        Page 1 / 1
    </p>
                            </aside><!-- /#featured -->
                                                </ol><!-- /#posts-list -->
                        </section><!-- /#content -->
                    <section id="extras" class="body">
                        <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                                                    <li><a href="http://scienceblogs.com/builtonfacts/">Built on Facts</a></li>
                                                    <li><a href="http://scienceblogs.com/principles/">Uncertain Principles</a></li>
                                                    <li><a href="http://www.wired.com/wiredscience/">Dot Physics</a></li>
                                                    <li><a href="http://blogs.scienceforums.net/swansont/">Swans on Tea</a></li>
                                                </ul>
                </div><!-- /.blogroll -->
                                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://thephysicsvirtuosi.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            
                                                    <li><a href="https://twitter.com/thevirtuosi">twitter</a></li>
                                                    <li><a href="https://www.facebook.com/thevirtuosi">facebook</a></li>
                                                </ul>
                </div><!-- /.social -->
                </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-15719155-6']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'thephysicsvirtuosi';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>